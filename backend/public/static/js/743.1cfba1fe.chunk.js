"use strict";(self.webpackChunkfullstack=self.webpackChunkfullstack||[]).push([[743],{9743:function(e,n,r){r.r(n),r.d(n,{default:function(){return Z}});var t=r(4165),c=r(5861),o=r(9439),a=r(7689),s=r(1413),i=r(3999),l=r(3373),u=r(2791),d=r(2921),f=r(184),h=function(e){var n=e.obj||{},r=n.className,t=n.style,c=n.center,o=n.zoom,a=(0,u.useRef)();return(0,u.useEffect)((function(){var e=new window.google.maps.Map(a.current,{center:c,zoom:o});new window.google.maps.Marker({position:c,map:e})}),[c,o]),(0,f.jsx)("div",{ref:a,className:"map ".concat(r),style:t})},p=r(3108),j=r(8340),m=r(5434),b=r(9895),x=function(e){var n=e.obj,r=(0,u.useContext)(p.V),a=r.isLoggedIn,s=r.userId,x=r.token,v=(0,u.useState)(!1),Z=(0,o.Z)(v,2),g=Z[0],k=Z[1],y=(0,u.useState)(!1),w=(0,o.Z)(y,2),C=w[0],E=w[1],O=(0,j.x)(),N=O.isLoading,_=O.error,D=O.sendRequest,P=O.clearError,S=n||{},L=S.id,R=S.image,A=S.title,I=S.description,z=S.address,T=S.onDelete,F=S.creator,M=S.location,q=function(){return k(!1)},B=function(){E(!1)},U=function(){var e=(0,c.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!1),e.prev=1,e.next=4,D("".concat("https://place-mern-app-backend.herokuapp.com/api","/places/").concat(L),"DELETE",null,{Authorization:"Bearer "+x});case 4:T(L),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(m.Z,{obj:{error:_,onClear:P}}),(0,f.jsx)(d.Z,{obj:{show:g,onCancel:q,header:z,contentClass:"place-item__modal-content",footerClass:"place-item__modal-actions",footer:(0,f.jsx)(i.Z,{obj:{onClick:q},children:"CLOSE"})},children:(0,f.jsx)("div",{className:"map-container",children:(0,f.jsx)(h,{obj:{center:M,zoom:16}})})}),(0,f.jsx)(d.Z,{obj:{show:C,onCancel:B,header:"Are you sure?",footerClass:"place-item__modal-actions",footer:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i.Z,{obj:{inverse:!0,onClick:B},children:"CANCEL"}),(0,f.jsx)(i.Z,{obj:{danger:!0,onClick:U},children:"DELETE"})]})},children:(0,f.jsx)("p",{children:"Do you want to proceed and delete this place? Please not that it can't be undone therearefter"})}),(0,f.jsx)("li",{className:"place-item",children:(0,f.jsxs)(l.Z,{obj:{style:{padding:0}},children:[N&&(0,f.jsx)(b.Z,{obj:{asOverlay:!0}}),(0,f.jsx)("div",{className:"place-item__image",children:(0,f.jsx)("img",{src:"".concat("https://place-mern-app-backend.herokuapp.com/","/").concat(R),alt:A})}),(0,f.jsxs)("div",{className:"place-item__info",children:[(0,f.jsx)("h2",{children:A}),(0,f.jsx)("h3",{children:z}),(0,f.jsx)("p",{children:I})]}),(0,f.jsxs)("div",{className:"place-item__actions",children:[(0,f.jsx)(i.Z,{obj:{inverse:!0,onClick:function(){return k(!0)}},children:"VIEW ON MAP"}),a&&F===s&&(0,f.jsx)(i.Z,{obj:{to:"/places/".concat(L)},children:"EDIT"}),a&&F===s&&(0,f.jsx)(i.Z,{obj:{danger:!0,onClick:function(){E(!0)}},children:"DELETE"})]})]})})]})},v=function(e){var n=e.obj||{},r=n.items,t=n.onDeletePlace;return 0===r.length?(0,f.jsx)("div",{className:"place-list center",children:(0,f.jsxs)(l.Z,{children:[(0,f.jsx)("h2",{children:"No places found, Maybe create one?"}),(0,f.jsx)(i.Z,{obj:{to:"/places/new"},children:"Share Place"})]})}):(0,f.jsx)("ul",{className:"place-list",children:r.map((function(e){return(0,f.jsx)(x,{obj:(0,s.Z)((0,s.Z)({},e),{},{onDelete:t})},e.id)}))})},Z=function(){var e=(0,a.UO)().userId,n=(0,j.x)(),r=n.sendRequest,s=n.isLoading,i=n.error,l=n.clearError,d=(0,u.useState)(),h=(0,o.Z)(d,2),p=h[0],x=h[1];(0,u.useEffect)((function(){var n=function(){var n=(0,c.Z)((0,t.Z)().mark((function n(){var c;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r("".concat("https://place-mern-app-backend.herokuapp.com/api","/places/user/").concat(e));case 3:c=n.sent,x(c.places),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(0);case 9:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();n()}),[r,e]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(m.Z,{obj:{error:i,onClear:l}}),s&&(0,f.jsx)("div",{className:"center",children:(0,f.jsx)(b.Z,{})}),!s&&p&&(0,f.jsx)(v,{obj:{items:p,onDeletePlace:function(e){x((function(n){return n.filter((function(n){return n.id!==e}))}))}}})]})}},3999:function(e,n,r){r.d(n,{Z:function(){return o}});var t=r(1087),c=r(184),o=function(e){var n=e.obj,r=e.children,o=n||{},a=o.href,s=o.size,i=o.inverse,l=o.danger,u=o.to,d=o.type,f=o.onClick,h=o.disabled,p=o.style;return a?(0,c.jsx)("a",{className:"button button--".concat(s||"default"," ").concat(i&&"button--inverse"," ").concat(l&&"button--danger"),href:a,children:r}):u?(0,c.jsx)(t.rU,{to:u,className:"button button--".concat(s||"default"," ").concat(i&&"button--inverse"," ").concat(l&&"button--danger"),children:r}):(0,c.jsx)("button",{className:"button button--".concat(s||"default"," ").concat(i&&"button--inverse"," ").concat(l&&"button--danger"),type:d,onClick:f,disabled:h,style:p,children:r})}},3373:function(e,n,r){r.d(n,{Z:function(){return c}});var t=r(184),c=function(e){var n=e.obj,r=e.children,c=n||{},o=c.className,a=c.style;return(0,t.jsx)("div",{className:"".concat(o," card"),style:a,children:r})}},5434:function(e,n,r){var t=r(2921),c=r(3999),o=r(184);n.Z=function(e){var n=e.obj||{},r=n.onClear,a=n.error;return(0,o.jsx)(t.Z,{obj:{onCancel:r,header:"An Error Occured!",show:!!a,footer:(0,o.jsx)(c.Z,{obj:{onClick:r},children:"Okay"})},children:(0,o.jsx)("p",{children:a})})}},2921:function(e,n,r){r.d(n,{Z:function(){return i}});var t=r(4164),c=r(9422),o=r(1176),a=r(184),s=function(e){var n=e.obj,r=e.children,c=n||{},o=c.className,s=c.style,i=c.headerClass,l=c.header,u=c.onSubmit,d=c.contentClass,f=c.footerClass,h=c.footer,p=(0,a.jsxs)("div",{className:"modal ".concat(o),style:s,children:[(0,a.jsx)("header",{className:"modal__header ".concat(i),children:(0,a.jsx)("h2",{children:l})}),(0,a.jsxs)("form",{onSubmit:u||function(e){return e.preventDefault()},children:[(0,a.jsx)("div",{className:"modal__content ".concat(d),children:r}),(0,a.jsx)("footer",{className:"modal__footer ".concat(f),children:h})]})]});return(0,t.createPortal)(p,document.getElementById("modal-hook"))},i=function(e){var n=e.obj,r=e.children,t=n||{},i=t.onCancel,l=t.show;return(0,a.jsxs)(a.Fragment,{children:[l&&(0,a.jsx)(c.Z,{obj:{onclick:i}}),(0,a.jsx)(o.Z,{in:l,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"modal",children:(0,a.jsx)(s,{obj:n,children:r})})]})}},8340:function(e,n,r){r.d(n,{x:function(){return s}});var t=r(4165),c=r(5861),o=r(9439),a=r(2791),s=function(){var e=(0,a.useState)(!1),n=(0,o.Z)(e,2),r=n[0],s=n[1],i=(0,a.useState)(),l=(0,o.Z)(i,2),u=l[0],d=l[1],f=(0,a.useRef)([]),h=(0,a.useCallback)(function(){var e=(0,c.Z)((0,t.Z)().mark((function e(n){var r,c,o,a,i,l,u=arguments;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"GET",c=u.length>2&&void 0!==u[2]?u[2]:null,o=u.length>3&&void 0!==u[3]?u[3]:{},s(!0),a=new AbortController,f.current.push(a),e.prev=6,e.next=9,fetch(n,{method:r,body:c,headers:o,signal:a.signal});case 9:return i=e.sent,e.next=12,i.json();case 12:if(l=e.sent,f.current=f.current.filter((function(e){return e!==a})),i.ok){e.next=16;break}throw new Error(l.message);case 16:return s(!1),e.abrupt("return",l);case 20:throw e.prev=20,e.t0=e.catch(6),d(e.t0.message),s(!1),e.t0;case 25:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(n){return e.apply(this,arguments)}}(),[]);return function(e){var n=(0,a.useRef)(e),r=(0,a.useRef)(),t=(0,a.useRef)(!1),c=(0,a.useRef)(!1),s=(0,a.useState)(0),i=(0,o.Z)(s,2)[1];t.current&&(c.current=!0),(0,a.useEffect)((function(){return t.current||(r.current=n.current(),t.current=!0),i((function(e){return e+1})),function(){c.current&&r.current&&r.current()}}),[])}((function(){return function(){f.current.forEach((function(e){return e.abort()}))}})),{isLoading:r,error:u,sendRequest:h,clearError:function(){d(null)}}}},1413:function(e,n,r){r.d(n,{Z:function(){return o}});var t=r(4942);function c(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function o(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?c(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}}}]);
//# sourceMappingURL=743.1cfba1fe.chunk.js.map